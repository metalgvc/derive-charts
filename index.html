<html>
<head>
    <title>Derive PnL charts (Alpha ver.)</title>

    <link rel="stylesheet" href="css/style.css">

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script src="https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/cdn/metamask-sdk.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.10.0/ethers.umd.min.js"></script>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <script src="js/utils.js"></script>
    <script src="js/derive.js"></script>
    <script src="js/index.js"></script>
</head>
<body>

<div class="main table">
    <div class="head table-row">
        <div class="table-cell">

            <div class="table">
                <div class="table-row">
                    <div class="table-cell">
                        <div>Derive Wallet Address: <span id="derive-address"></span></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="chart table-row">
        <div id="optionsChart"></div>
    </div>
    <div class="portfolio table-row">
        <div class="table-cell">
            <div class="table">

                <div class="table-head">
                    <div class="table-row">
                        <div class="table-cell">on/off</div>
                        <div class="table-cell">Position</div>
                        <div class="table-cell">Size</div>
                        <div class="table-cell">Entry Price</div>
                        <div class="table-cell">Current Price</div>
                        <div class="table-cell">Liq / Oracle</div>
                        <div class="table-cell">Unrealized P&L</div>
                        <div class="table-cell">Realized P&L</div>
                        <div class="table-cell">Margin</div>
                    </div>
                </div>

                <div class="table-body portfolio-rows"></div>

            </div>
        </div>
    </div>
</div>

<div id="templates" class="hide">
    <div data-id="portfolio-row">
        <div class="table-row" data-position='{data}'>
            <div class="table-cell px"><input type="checkbox" class="instrument" name="{instrument_name}" /></div>
            <div class="table-cell">
                <div class="table">
                    <div class="table-cell px">
                        <img class="icon" src="{icon_src}" />
                    </div>
                    <div class="table-cell">
                        <div>{instrument_name}</div>
                        <div>
                            <span class="sl-{sl_type}">{sl_type}</span>
                            <span class="text-grey">{leverage|.2}</span>
                            <span class="text-grey">{opt_exp}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="table-cell">
                <span>{amount}</span>&nbsp;<span>{amount_type}</span><br />
                <span class="text-grey">{amount_usd|.2}</span>
            </div>
            <div class="table-cell">${average_price_excl_fees|.2}</div>
            <div class="table-cell">${mark_price|.2}</div>
            <div class="table-cell">{liquidation_price|.2}</div>
            <div class="table-cell {unrealized_pnl_color}">{unrealized_pnl|.2}</div>
            <div class="table-cell {realized_pnl_color}">{realized_pnl|.2}</div>
            <div class="table-cell">{maintenance_margin|.2}</div>
        </div>
    </div>

</div>

</body>
</html>